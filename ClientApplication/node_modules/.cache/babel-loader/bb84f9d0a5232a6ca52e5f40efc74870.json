{"ast":null,"code":"var _jsxFileName = \"D:\\\\vitus\\\\Documents\\\\Szakdolgozat\\\\AuctionApplication\\\\ClientApplication\\\\src\\\\Auctions\\\\AuctionsAll.tsx\";\nimport React from \"react\";\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport Image from '../Common/Image';\nimport SearchBox2 from \"../Common/ExtendedSearchBox\";\nimport SingleAuction from \"./SingleAuction\";\nimport Moment from 'react-moment';\nimport ReactPaginate from 'react-paginate';\nvar search = '';\nvar order = '';\nvar filter = '';\nvar category = '';\nvar currentpage = 1;\nexport default function AuctionsAll(props) {\n  let a = [];\n  const [data, setData] = useState(a);\n  const [finaldata, setFinalData] = useState(a);\n  const [selected, setSelected] = useState(0);\n  const [selectedmaxsum, setSelectedMaxSum] = useState(0);\n  const [isSelected, setSelect] = useState(false);\n  const [datalenght, setLenght] = useState(0);\n  const [maxpage, setMax] = useState(0);\n  category = props.category;\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res = await axios('https://localhost:5001/api/auction?pageNumber=' + currentpage + '&searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n        setData(res.data);\n        setFinalData(res.data);\n        const num = await axios('https://localhost:5001/api/auction/datalenght?searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n        setLenght(num.data);\n        setMax(Math.ceil(num.data / 4));\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    fetchData();\n  }, [isSelected]);\n\n  const handleBack = () => {\n    setSelect(false);\n  };\n\n  const SearchHandler = async t => {\n    search = t;\n\n    try {\n      const res = await axios('https://localhost:5001/api/auction?pageNumber=' + currentpage + '&searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n      setData(res.data);\n      setFinalData(res.data);\n      console.log(maxpage);\n      const num = await axios('https://localhost:5001/api/auction/datalenght?searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n      setLenght(num.data);\n      setMax(Math.ceil(num.data / 4));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const OrderHandler = async mode => {\n    switch (mode) {\n      case 0:\n        order = '';\n        break;\n\n      case 1:\n        order = 'start_asc';\n        break;\n\n      case 2:\n        order = 'start_desc';\n        break;\n\n      case 3:\n        order = 'price_asc';\n        break;\n\n      case 4:\n        order = 'price_desc';\n        break;\n\n      default:\n        order = '';\n        break;\n    }\n\n    try {\n      const res = await axios('https://localhost:5001/api/auction?pageNumber=' + currentpage + '&searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n      setData(res.data);\n      setFinalData(res.data);\n      const num = await axios('https://localhost:5001/api/auction/datalenght?searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n      setLenght(num.data);\n      setMax(Math.ceil(num.data / 4));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const FilterHandler = async mode => {\n    switch (mode) {\n      case 0:\n        filter = '';\n        break;\n\n      case 1:\n        filter = 'active';\n        break;\n\n      case 2:\n        filter = 'next_week';\n        break;\n\n      case 3:\n        filter = 'next_month';\n        break;\n\n      default:\n        filter = '';\n        break;\n    }\n\n    try {\n      const res = await axios('https://localhost:5001/api/auction?pageNumber=' + currentpage + '&searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n      setData(res.data);\n      setFinalData(res.data);\n      const num = await axios('https://localhost:5001/api/auction/datalenght?searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n      setLenght(num.data);\n      setMax(Math.ceil(num.data / 4));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const CategoryHandler = async cat => {\n    switch (cat) {\n      case -1:\n        category = '';\n        break;\n\n      case 0:\n        category = '0';\n        break;\n\n      case 1:\n        category = '1';\n        break;\n\n      case 2:\n        category = '2';\n        break;\n\n      case 3:\n        category = '3';\n        break;\n\n      case 4:\n        category = '4';\n        break;\n\n      case 5:\n        category = '5';\n        break;\n\n      default:\n        order = '';\n        break;\n    }\n\n    try {\n      const res = await axios('https://localhost:5001/api/auction?pageNumber=' + currentpage + '&searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n      setData(res.data);\n      setFinalData(res.data);\n      const num = await axios('https://localhost:5001/api/auction/datalenght?searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n      setLenght(num.data);\n      setMax(Math.ceil(num.data / 4));\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handlePageClick = async data => {\n    currentpage = data.selected + 1;\n\n    try {\n      const res = await axios('https://localhost:5001/api/auction?pageNumber=' + currentpage + '&searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n      setData(res.data);\n      setFinalData(res.data);\n      const num = await axios('https://localhost:5001/api/auction/datalenght?searchString=' + search + '&sortOrder=' + order + '&filterMode=' + filter + '&category=' + category);\n      setLenght(num.data);\n      setMax(Math.ceil(num.data / 4));\n    } catch (error) {\n      console.log(error);\n    }\n\n    console.log(data.selected);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, isSelected ? React.createElement(SingleAuction, {\n    id: selected,\n    sum: selectedmaxsum,\n    ClickHandler: handleBack,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }) : React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, React.createElement(SearchBox2, {\n    SearchHandler: SearchHandler,\n    OrderHandler: OrderHandler,\n    FilterHandler: FilterHandler,\n    CategoryHandler: CategoryHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }), React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, finaldata.map(item => React.createElement(Col, {\n    xs: 12,\n    md: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }), React.createElement(Card, {\n    className: \"shadow\",\n    bg: \"dark\",\n    onClick: () => {\n      setSelected(item.id);\n      setSelectedMaxSum(item.actualPrice);\n      setSelect(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, React.createElement(Col, {\n    xs: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, React.createElement(Image, {\n    id: item.thingID,\n    small: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  })), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, React.createElement(Card.Title, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, item.thingName), React.createElement(Card.Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, React.createElement(\"h6\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, \"Price: \", item.actualPrice, \" Ft\"), item.statusz === 1 ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, \" Remaining time: \", React.createElement(Moment, {\n    toNow: true,\n    ago: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, item.endTime)) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, new Date(item.endTime).toLocalString())))), React.createElement(Card.Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, \" \", item.statusz === 1 ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, \"Active\") : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, \"Upcoming\")))))), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }), React.createElement(ReactPaginate, {\n    previousLabel: 'previous',\n    nextLabel: 'next',\n    breakLabel: '...',\n    breakClassName: 'break-me',\n    pageCount: maxpage,\n    marginPagesDisplayed: 2,\n    pageRangeDisplayed: 5,\n    onPageChange: handlePageClick,\n    containerClassName: 'pagination',\n    pageClassName: 'page-link',\n    previousClassName: 'page-link',\n    nextClassName: 'page-link',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["D:/vitus/Documents/Szakdolgozat/AuctionApplication/ClientApplication/src/Auctions/AuctionsAll.tsx"],"names":["React","useState","useEffect","axios","Container","Row","Col","Card","Image","SearchBox2","SingleAuction","Moment","ReactPaginate","search","order","filter","category","currentpage","AuctionsAll","props","a","data","setData","finaldata","setFinalData","selected","setSelected","selectedmaxsum","setSelectedMaxSum","isSelected","setSelect","datalenght","setLenght","maxpage","setMax","fetchData","res","num","Math","ceil","error","console","log","handleBack","SearchHandler","t","OrderHandler","mode","FilterHandler","CategoryHandler","cat","handlePageClick","map","item","id","actualPrice","thingID","thingName","statusz","endTime","Date","toLocalString"],"mappings":"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","sourcesContent":["\r\nimport React from \"react\";\r\nimport { useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport * as signalR from \"@microsoft/signalr\";\r\nimport { HubConnection, HubConnectionBuilder } from '@aspnet/signalr';\r\nimport axios from 'axios';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Image from '../Common/Image';\r\nimport SearchBox2 from \"../Common/ExtendedSearchBox\";\r\nimport SingleAuction from \"./SingleAuction\";\r\nimport Moment from 'react-moment';\r\nimport ReactPaginate from 'react-paginate';\r\nimport { Auction } from '../Common/Interfaces';\r\n\r\ninterface IProps{\r\n  category : string\r\n}\r\n\r\n\r\n\r\n    var search='';\r\n    var order='';\r\n    var filter='';\r\n    var category='';\r\n    var currentpage=1;\r\n\r\nexport default function AuctionsAll(props: IProps){\r\n  let a : Auction[] =[];\r\n    const [data, setData] = useState(a);\r\n    const [finaldata, setFinalData] = useState(a);\r\n    const [selected,setSelected] = useState(0);\r\n    const [selectedmaxsum,setSelectedMaxSum] = useState(0);\r\n    const [isSelected,setSelect]=useState(false);\r\n    const [datalenght, setLenght] = useState(0)\r\n    const [maxpage, setMax] = useState(0);\r\n    category=props.category;\r\n    \r\n\r\n    useEffect(() => {\r\n      const fetchData = async () => {\r\n        try {\r\n          const res = await axios('https://localhost:5001/api/auction?pageNumber='+currentpage+'&searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n          setData(res.data);\r\n          setFinalData(res.data);\r\n          const num = await axios('https://localhost:5001/api/auction/datalenght?searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n          setLenght(num.data);\r\n          setMax(Math.ceil(num.data/4));\r\n \r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      };\r\n      fetchData();\r\n      \r\n    },[isSelected]);\r\n\r\n  const handleBack=()=> {setSelect(false);}\r\n\r\n  const  SearchHandler= async(t : string)=>{\r\n      search=t;\r\n    try {\r\n        const res = await axios('https://localhost:5001/api/auction?pageNumber='+currentpage+'&searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n        setData(res.data);\r\n        setFinalData(res.data);\r\n        console.log(maxpage);\r\n        const num = await axios('https://localhost:5001/api/auction/datalenght?searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n        setLenght(num.data);\r\n        setMax(Math.ceil(num.data/4));\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n  }\r\n\r\n    const OrderHandler= async(mode : number)=>{\r\n      switch(mode)\r\n      {\r\n        case 0:\r\n          order='';\r\n        break;\r\n        case 1:\r\n          order='start_asc';\r\n        break;  \r\n        case 2:\r\n          order='start_desc';\r\n        break;\r\n        case 3:\r\n          order='price_asc';\r\n        break;\r\n        case 4:\r\n          order='price_desc';\r\n        break;\r\n        default:\r\n          order='';\r\n          break;\r\n      }\r\n        try {\r\n            const res = await axios('https://localhost:5001/api/auction?pageNumber='+currentpage+'&searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n            setData(res.data);\r\n            setFinalData(res.data);\r\n            const num = await axios('https://localhost:5001/api/auction/datalenght?searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n            setLenght(num.data);\r\n            setMax(Math.ceil(num.data/4));\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n    }\r\n\r\n    const FilterHandler=async(mode : number)=>{\r\n        switch(mode)\r\n        {\r\n          case 0:\r\n            filter='';\r\n            break;\r\n          case 1:\r\n            filter='active';\r\n            break;\r\n          case 2:\r\n            filter='next_week';\r\n            break;\r\n          case 3:\r\n            filter='next_month';\r\n            break;\r\n          default:\r\n            filter='';\r\n            break;\r\n        }\r\n        try {\r\n            const res = await axios('https://localhost:5001/api/auction?pageNumber='+currentpage+'&searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n            setData(res.data);\r\n            setFinalData(res.data);\r\n            const num = await axios('https://localhost:5001/api/auction/datalenght?searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n            setLenght(num.data);\r\n            setMax(Math.ceil(num.data/4));\r\n          } catch (error) {\r\n            console.log(error);\r\n          }\r\n    }\r\n    \r\n    const CategoryHandler=async(cat : number)=>{\r\n      switch(cat)\r\n      {\r\n        case -1:\r\n          category='';\r\n        break;\r\n        case 0:\r\n          category='0';\r\n        break;  \r\n        case 1:\r\n          category='1';\r\n        break;\r\n        case 2:\r\n          category='2';\r\n        break;\r\n        case 3:\r\n          category='3';\r\n        break;\r\n        case 4:\r\n          category='4';\r\n        break;\r\n        case 5:\r\n          category='5';\r\n        break;\r\n        default:\r\n          order='';\r\n          break;\r\n      }\r\n      try {\r\n        const res = await axios('https://localhost:5001/api/auction?pageNumber='+currentpage+'&searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n        setData(res.data);\r\n        setFinalData(res.data);\r\n        const num = await axios('https://localhost:5001/api/auction/datalenght?searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n        setLenght(num.data);\r\n        setMax(Math.ceil(num.data/4));\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    }\r\n\r\n    const handlePageClick = async (data : any) => {\r\n        currentpage=data.selected+1;\r\n        \r\n        try {\r\n          const res = await axios('https://localhost:5001/api/auction?pageNumber='+currentpage+'&searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n          setData(res.data);\r\n          setFinalData(res.data);\r\n          const num = await axios('https://localhost:5001/api/auction/datalenght?searchString='+search+'&sortOrder='+order+'&filterMode='+filter+'&category='+category,);\r\n          setLenght(num.data);\r\n          setMax(Math.ceil(num.data/4));\r\n \r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n   \r\n        console.log(data.selected);\r\n    }\r\n\r\n  return (\r\n    <div>\r\n      {isSelected ? ( \r\n        <SingleAuction id={selected} sum={selectedmaxsum} ClickHandler={handleBack} />\r\n      ) : (\r\n        <Container>\r\n            <SearchBox2 SearchHandler={SearchHandler} OrderHandler={OrderHandler} FilterHandler={FilterHandler} CategoryHandler={CategoryHandler}/>\r\n            <Row>\r\n            {\r\n            finaldata.map(item => (\r\n                <Col  xs={12} md={6}>\r\n                  <br/>\r\n                 <Card className=\"shadow\" bg='dark' onClick={()=>{\r\n                   setSelected(item.id);\r\n                   setSelectedMaxSum(item.actualPrice);\r\n                   setSelect(true);}}>\r\n                    <Row>\r\n                        <Col xs={4}>\r\n                            <Image id={item.thingID} small={true}/>\r\n                        </Col>\r\n                        <Col>\r\n                            <Card.Title>{item.thingName}</Card.Title>\r\n                            <Card.Body><h6>Price: {item.actualPrice} Ft</h6> \r\n                           \r\n                 {item.statusz === 1 ? (<div> Remaining time: <Moment toNow ago>{item.endTime}</Moment></div>) : (<div>{new Date(item.endTime).toLocalString()}</div>)}\r\n                            </Card.Body>\r\n                        </Col>\r\n                     </Row>\r\n                    <Card.Footer> {item.statusz === 1 ? (<div>Active</div>) : (<div>Upcoming</div>)}</Card.Footer>\r\n                 </Card>\r\n              </Col>\r\n            ))}\r\n             </Row>\r\n             <br/>\r\n             <ReactPaginate \r\n                 previousLabel={'previous'}\r\n                 nextLabel={'next'}\r\n                 breakLabel={'...'}\r\n                 breakClassName={'break-me'}\r\n                 pageCount={maxpage}\r\n                 marginPagesDisplayed={2}\r\n                 pageRangeDisplayed={5}\r\n                 onPageChange={handlePageClick}\r\n                 containerClassName={'pagination'}\r\n                 pageClassName={'page-link'}\r\n                 previousClassName={'page-link'}\r\n                 nextClassName={'page-link'}\r\n        />\r\n          </Container>  \r\n      )}\r\n    </div>\r\n  ); \r\n}"]},"metadata":{},"sourceType":"module"}