{"ast":null,"code":"var _jsxFileName = \"D:\\\\vitus\\\\Documents\\\\Szakdolgozat\\\\AuctionApplication\\\\ClientApplication\\\\src\\\\Auctions\\\\Biding.tsx\";\nimport React from \"react\";\nimport { useState } from 'react';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport Container from \"react-bootstrap/Container\";\nimport Card from \"react-bootstrap/Card\";\nimport Moment from 'react-moment';\nimport authHeader from \"../Services/TokenService\";\nimport SendBid from './SendBid';\nimport { connection } from '../Services/SignalRHubService';\nexport default function Biding(props) {\n  var a = [];\n  const [data, setData] = useState(a);\n  const i = props.id;\n  const [maxsum, setSum] = useState(props.sum);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const [hubConnection, setHubConnection] = useState(connection);\n  const [endTime, setEnd] = useState(new Date(props.endTime));\n  const [startTime, setStart] = useState(new Date(props.startTime));\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsError(false);\n      setIsLoading(true);\n\n      try {\n        const res = await axios.get('https://localhost:5001/api/bid/' + i, {\n          headers: authHeader()\n        });\n        setData(res.data);\n      } catch (error) {\n        console.log(error);\n      }\n\n      setIsLoading(false);\n\n      try {\n        await hubConnection.start();\n        console.log('Connection successful!');\n      } catch (err) {\n        console.log(err);\n      }\n\n      hubConnection.on('ReceiveSum', (id, sum, name, date) => {\n        setSum(sum);\n\n        if (id === i) {\n          var _document$getElementB;\n\n          var node = document.createElement(\"LI\");\n          node.innerHTML = \"<b>\" + sum + \" Ft</b> by \" + name + \" at \" + date;\n          (_document$getElementB = document.getElementById(\"sumlist\")) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.appendChild(node);\n          console.log(\"receive\");\n        }\n      });\n    };\n\n    fetchData();\n    return () => {\n      hubConnection.off('ReceiveSum');\n      hubConnection.stop();\n    };\n  }, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, isError && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Something went wrong ...\", i), isLoading ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Loading ...\") : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), React.createElement(Container, {\n    className: \"little-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }), React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Actual price:\"), \" \", maxsum, \" Ft\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  })), React.createElement(Col, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }), React.createElement(\"h5\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"Remaining time: \"), React.createElement(Moment, {\n    toNow: true,\n    ago: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, endTime), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  })))), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), React.createElement(Card, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(SendBid, {\n    id: props.id,\n    sum: maxsum,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }), React.createElement(\"ul\", {\n    id: \"sumlist\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, data.map(item => React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, item.sum, \" Ft\"), \" by \", item.personName, \" at \", React.createElement(Moment, {\n    format: \"YYYY.MM.DD hh.mm\",\n    date: item.time,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  })))))));\n}","map":{"version":3,"sources":["D:/vitus/Documents/Szakdolgozat/AuctionApplication/ClientApplication/src/Auctions/Biding.tsx"],"names":["React","useState","useEffect","axios","Col","Row","Container","Card","Moment","authHeader","SendBid","connection","Biding","props","a","data","setData","i","id","maxsum","setSum","sum","isLoading","setIsLoading","isError","setIsError","hubConnection","setHubConnection","endTime","setEnd","Date","startTime","setStart","fetchData","res","get","headers","error","console","log","start","err","on","name","date","node","document","createElement","innerHTML","getElementById","appendChild","off","stop","map","item","personName","time"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { HubConnection, HubConnectionBuilder } from '@microsoft/signalr';\r\nimport axios from 'axios';\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport { useAuth } from \"../Services/AuthService\";\r\nimport Moment from 'react-moment';\r\nimport { Bid } from '../Common/Interfaces';\r\nimport authHeader from \"../Services/TokenService\";\r\nimport  userId  from '../Services/UserService';\r\nimport SendBid from './SendBid';\r\nimport { connection } from '../Services/SignalRHubService'\r\n\r\ninterface IProps{\r\n  id : number;\r\n  sum : number;\r\n  startTime :string;\r\n  endTime : string;\r\n}\r\n    \r\n    export default function Biding(props:IProps){\r\n      var a: Bid[] = [];\r\n      const [data, setData] = useState(a);\r\n      const i:number =props.id;\r\n      const [maxsum, setSum] = useState(props.sum);\r\n      const [isLoading, setIsLoading] = useState(false);\r\n      const [isError, setIsError] = useState(false);\r\n      const [hubConnection, setHubConnection] = useState<HubConnection>(connection);\r\n\r\n      const[endTime,setEnd]=useState(new Date(props.endTime));\r\n      const[startTime,setStart]=useState(new Date(props.startTime));\r\n     \r\n    \r\n       useEffect(() => {\r\n        const fetchData = async () => {\r\n          setIsError(false);\r\n          setIsLoading(true);\r\n            try {\r\n                 const res = await axios.get<Bid[]>('https://localhost:5001/api/bid/'+i, { headers: authHeader() });\r\n                  setData(res.data); \r\n                }\r\n             catch (error) {  \r\n                  console.log(error);\r\n                }\r\n            setIsLoading(false);\r\n            try {\r\n                   await hubConnection.start()\r\n                   console.log('Connection successful!')\r\n                 }\r\n            catch (err) {\r\n                console.log(err);\r\n            }\r\n\r\n            hubConnection.on('ReceiveSum', (id, sum, name, date) => {\r\n              setSum(sum);\r\n              if(id === i){   \r\n              var node = document.createElement(\"LI\");\r\n             node.innerHTML=\"<b>\" +sum+ \" Ft</b> by \"+name+\" at \"+date;\r\n              document.getElementById(\"sumlist\")?.appendChild(node);\r\n              console.log(\"receive\");\r\n              }\r\n            });\r\n\r\n        };\r\n        fetchData();\r\n        return () => {\r\n          hubConnection.off('ReceiveSum');\r\n          hubConnection.stop();\r\n        }\r\n      },[]);\r\n    \r\n      return(\r\n        <div>\r\n          {isError && <div>Something went wrong ...{i}</div>}\r\n          {isLoading ? (\r\n            <div>Loading ...</div>\r\n          ) : (\r\n           <div>\r\n             <br/>\r\n              <Container className=\"little-container\">\r\n                <Row>\r\n                  <Col>\r\n                     <Card className=\"text-center\">\r\n                     <br/>\r\n                        <h5>Actual price:</h5> {maxsum} Ft \r\n                        <br/>\r\n                        <br/>\r\n                      </Card>\r\n                      <br/>\r\n                  </Col>\r\n                  <Col>\r\n                      <Card className=\"text-center\">\r\n                      <br/>\r\n                        <h5>Remaining time: </h5> \r\n                        <Moment toNow ago>{endTime}</Moment>\r\n                        <br/>\r\n                      </Card>\r\n                      <br/>\r\n                  </Col>\r\n                </Row>\r\n              </Container>\r\n              <br/>\r\n              \r\n             <Card>\r\n             <br/>\r\n             <SendBid id={props.id} sum={maxsum}/>\r\n             <br/>\r\n              <ul id=\"sumlist\">\r\n              {\r\n              data.map(item => (\r\n              <li>\r\n                <b>{item.sum} Ft</b> by {item.personName} at <Moment format=\"YYYY.MM.DD hh.mm\"  date={item.time} />\r\n                     \r\n              </li>\r\n              ))}\r\n              </ul>\r\n              </Card>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )\r\n    }"]},"metadata":{},"sourceType":"module"}